(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ef5006d"],{"498a":function(e,t,i){"use strict";var a=i("23e7"),r=i("58a8").trim,n=i("c8d2");a({target:"String",proto:!0,forced:n("trim")},{trim:function(){return r(this)}})},"4de4":function(e,t,i){"use strict";var a=i("23e7"),r=i("b727").filter,n=i("1dde"),c=i("ae40"),s=n("filter"),l=c("filter");a({target:"Array",proto:!0,forced:!s||!l},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,i){var a=i("1d80"),r=i("5899"),n="["+r+"]",c=RegExp("^"+n+n+"*"),s=RegExp(n+n+"*$"),l=function(e){return function(t){var i=String(a(t));return 1&e&&(i=i.replace(c,"")),2&e&&(i=i.replace(s,"")),i}};e.exports={start:l(1),end:l(2),trim:l(3)}},"9c34":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"label"},[e._v("消息类型：")]),i("el-select",{staticStyle:{flex:"1"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.handleChangeActivityType},model:{value:e.activityType,callback:function(t){e.activityType=t},expression:"activityType"}},[i("el-option",{attrs:{label:"班级通知",value:"1"}}),i("el-option",{attrs:{label:"班级风采",value:"2"}})],1)],1),i("div",{staticClass:"row"},[i("div",{staticClass:"label"},[e._v("显示天数：")]),i("el-input-number",{staticStyle:{flex:"1"},attrs:{size:"small",min:1,max:30,label:"显示天数"},model:{value:e.effectiveTime,callback:function(t){e.effectiveTime=t},expression:"effectiveTime"}})],1),i("div",{staticClass:"row"},[i("el-input",{attrs:{type:"textarea",rows:8,placeholder:e.contentPlaceHolder},model:{value:e.activityDescribe,callback:function(t){e.activityDescribe=t},expression:"activityDescribe"}})],1),i("div",{staticClass:"row"},[i("div",{staticClass:"label"},[e._v("图片发布")]),i("div",{staticClass:"right"},[e._v(e._s(e.pictureInfoList.length)+"/6")])]),"2"===e.activityType?i("div",{staticClass:"row"},[i("el-upload",{attrs:{action:"/api/upload/uploadSubmit","list-type":"picture-card","on-preview":e.handlePictureCardPreview,limit:6,multiple:"","on-success":e.handleUploadSuccess,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1):e._e(),i("el-button",{staticStyle:{width:"100%","margin-top":"15px"},attrs:{type:"primary"},on:{click:e.handleSubmitBtnClick}},[e._v("发布")])],1)},r=[],n=(i("4de4"),i("d81d"),i("498a"),i("be4f"),i("450d"),i("896a")),c=i.n(n),s=i("2ef0"),l=i.n(s),o=i("b33c"),u={name:"electronicClassCard",data:function(){return{activityType:"1",effectiveTime:7,activityDescribe:"",pictureInfoList:[],contentPlaceHolder:"请输入通知内容",dialogImageUrl:"",dialogVisible:!1}},mounted:function(){document.title="活动发布"},methods:{handleChangeActivityType:function(e){this.contentPlaceHolder="1"===e?"请输入通知内容":"请输入班级风采介绍"},handleRemove:function(e,t){var i=l.a.filter(this.pictureInfoList,(function(t){return t.key!==e.url}));this.pictureInfoList=i},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleUploadSuccess:function(e,t,i){var a=t.url,r=e.url;this.pictureInfoList.push({key:a,value:r})},handleSubmitBtnClick:function(){var e=this,t=this.$route.params,i=t.teacherNumber,a=t.campusNumber,r=this.activityType,n=this.effectiveTime,s=this.activityDescribe,u=this.pictureInfoList;if("1"===r){if(""===l.a.trim(s))return this.$message.error("通知内容不能为空!"),!1}else if("2"===r&&0==u.length)return this.$message.error("图片发布不能为空!"),!1;var d=new Date,f=Object(o["d"])(d),p=Object(o["d"])(Object(o["e"])(d,n)),v=l.a.map(this.pictureInfoList,(function(e){return e.value})),m={teacherNumber:i,campusNumber:a,activityType:r,startTime:f,endTime:p,activityDescribe:s,fileList:v},h="/api/yiClassAndStudent/submitElectronicClassCardForm",b=c.a.service({fullscreen:!0}),y=Object(o["a"])(h,m);y.then((function(t){console.info("resp data : ",t),b.close(),"false"===t.flag&&e.$message.error("提交电子班牌数据报错!")})).catch((function(t){b.close(),e.$message.error("提交电子班牌数据报错!")}))}}},d=u,f=(i("f9f5"),i("2877")),p=Object(f["a"])(d,a,r,!1,null,"0ea8ef88",null);t["default"]=p.exports},c03c:function(e,t,i){},c8d2:function(e,t,i){var a=i("d039"),r=i("5899"),n="​᠎";e.exports=function(e){return a((function(){return!!r[e]()||n[e]()!=n||r[e].name!==e}))}},d81d:function(e,t,i){"use strict";var a=i("23e7"),r=i("b727").map,n=i("1dde"),c=i("ae40"),s=n("map"),l=c("map");a({target:"Array",proto:!0,forced:!s||!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},f9f5:function(e,t,i){"use strict";var a=i("c03c"),r=i.n(a);r.a}}]);
//# sourceMappingURL=chunk-6ef5006d.35fc13bb.js.map